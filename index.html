
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>여름특강 달력형 신청</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    td, th { border: 1px solid #ccc; padding: 8px; text-align: center; vertical-align: top; }
    th { background-color: #e0e7ff; }
    .date-label { font-weight: bold; margin-bottom: 4px; display: block; }
    .cell { margin: 1px 0; cursor: pointer; border: 1px solid #ccc; padding: 4px; border-radius: 4px; font-size: 0.9em; }
    .cell.selected { background-color: coral; color: white; }
    .form-input { margin-bottom: 10px; display: block; }
  </style>
</head>
<body>
  <h2>여름특강 달력형 신청</h2>
  <form id="submitForm">
    <label class="form-input">이름: <input type="text" id="name" required /></label>
    <label class="form-input">학교: <input type="text" id="school" required /></label>
    <label class="form-input">학년: <input type="text" id="grade" required /></label>

    <table>
      <thead>
        <tr>
          <th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th><th>일</th>
        </tr>
      </thead>
      <tbody id="calendarBody"></tbody>
    </table>

    <br />
    <button type="submit">제출하기</button>
  </form>

  <script>
    const dates = {
      "7/14": [],
      "7/15": [],
      "7/16": ["미개강", "B 타임", "C 타임"],
      "7/17": ["미개강", "B 타임", "C 타임"],
      "7/18": ["미개강", "B 타임", "C 타임"],
      "7/19": ["A 타임", "B 타임", "미개강"],
      "7/20": ["A 타임", "B 타임", "미개강"],
      "7/21": ["미개강", "B 타임", "C 타임"],
      "7/22": ["미개강", "B 타임", "C 타임"],
      "7/23": ["미개강", "B 타임", "C 타임"],
      "7/24": ["미개강", "B 타임", "C 타임"],
      "7/25": ["미개강", "B 타임", "C 타임"],
      "7/26": ["A 타임", "B 타임", "미개강"],
      "7/27": ["A 타임", "B 타임", "미개강"],
      "7/28": ["미개강", "B 타임", "C 타임"],
      "7/29": ["미개강", "B 타임", "C 타임"],
      "7/30": ["미개강", "B 타임", "C 타임"],
      "7/31": ["미개강", "B 타임", "C 타임"],
      "8/1": ["미개강", "B 타임", "C 타임"],
      "8/2": ["A 타임", "B 타임", "미개강"],
      "8/3": ["A 타임", "B 타임", "미개강"],
      "8/4": ["미개강", "B 타임", "C 타임"],
      "8/5": ["미개강", "B 타임", "C 타임"],
      "8/6": ["미개강", "B 타임", "C 타임"],
      "8/7": ["미개강", "B 타임", "C 타임"],
      "8/8": ["미개강", "B 타임", "C 타임"],
      "8/9": ["A 타임", "B 타임", "미개강"],
      "8/10": ["A 타임", "B 타임", "미개강"],
      "8/11": ["미개강", "B 타임", "C 타임"],
      "8/12": ["미개강", "B 타임", "C 타임"],
      "8/13": ["미개강", "B 타임", "C 타임"],
      "8/14": ["미개강", "B 타임", "C 타임"],
      "8/15": ["미개강", "B 타임", "C 타임"],
      "8/16": ["A 타임", "B 타임", "미개강"],
      "8/17": ["A 타임", "B 타임", "미개강"],
      "8/18": ["미개강", "B 타임", "C 타임"],
      "8/19": ["미개강", "B 타임", "C 타임"],
      "8/20": ["미개강", "B 타임", "C 타임"]
    };

    const calendarBody = document.getElementById("calendarBody");
    const selected = [];

    function createCalendar() {
      const startDate = new Date(2024, 6, 14); // July 14, 2024
      for (let week = 0; week < 6; week++) {
        const row = document.createElement("tr");
        for (let day = 0; day < 7; day++) {
          const cellDate = new Date(startDate);
          cellDate.setDate(startDate.getDate() + week * 7 + day);
          const month = cellDate.getMonth() + 1;
          const date = cellDate.getDate();
          const key = `${month}/${date}`;
          const td = document.createElement("td");
          if (dates.hasOwnProperty(key)) {
            td.innerHTML = `<span class="date-label">${key}</span>`;
            dates[key].forEach(slot => {
              const div = document.createElement("div");
              div.className = "cell";
              div.textContent = slot;
              div.addEventListener("click", () => {
                const id = `${key} ${slot}`;
                if (selected.includes(id)) {
                  selected.splice(selected.indexOf(id), 1);
                  div.classList.remove("selected");
                } else {
                  selected.push(id);
                  div.classList.add("selected");
                }
              });
              td.appendChild(div);
            });
          }
          row.appendChild(td);
        }
        calendarBody.appendChild(row);
      }
    }

    createCalendar();

    document.getElementById("submitForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const payload = {
        name: document.getElementById("name").value,
        school: document.getElementById("school").value,
        grade: document.getElementById("grade").value,
        times: selected
      };

      await fetch("https://script.google.com/macros/s/your-script-id/exec", {
        method: "POST",
        body: JSON.stringify(payload),
        headers: { "Content-Type": "application/json" }
      });

      alert("제출 완료!");
      location.reload();
    });
  </script>
</body>
</html>
